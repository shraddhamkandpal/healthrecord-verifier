# Affinidi Use Case Implementation - Health Record - Verifier

## Table of contents

- [Introduction](#introduction)
- [Initial Set Up](#how-to-setup)

  - [Generate Affinidi API Key](#generate-api-key)
  - [Configure .env File](#configure-.env-file)
  - [Generate Share Credential Request Token](#generate-share-credential-request-token)

- [How to run](#how-to-run)
  - [Sequence](#sequence)

## Introduction

Welcome to Health Wallet Use Case - Verifier application. In this application, you will be able to see how does a health record from an applicant be shared and thereafter the hospital be able to view the incoming credentials and checks whether is the health record is verified before proceeding with the transaction.


## Initial Set Up

### Generate API Key

Before you could use our API and SDK services, you would have to register to get the API keys.

1. Go to apikey.affinidi.com
2. Register for an account
3. Store the `API Key` and `API Key Hash` safely

### Configure .env file

1. Open terminal and navigate to the project folder
2. Run `cp .env.example .env`
3. Fill in the .env file with the details that you have gathered in the previous steps

```
REACT_APP_API_KEY=<<Afffinidi's API Key>>
REACT_APP_API_KEY_HASH=<<Affinidi's API Key Hash>>
REACT_APP_ENVIRONMENT=prod
REACT_APP_WALLET_URL=http://localhost:3001
```

### Generate Share Credential Request Token

In a normal scenario for this use case, an user who would like to rent a car, has to share his/her credential through a 'Share Credential Request/Response Token'. 'Share Credential Request Token' is typically generated by an official verifier using their DID and the type of credential that they would like to get from the user. 'Share Credential Response Token' is generated by the holder when he/she selects a particular credential, signs it with his/her DID and provides it back to the verifier to authenticate the validity of the provided credential. Here, we have placed the 'Share Credential Request Token' as a hardcoded value which is located in `src/containers/Login.tsx` of `shareCredRequestToken` variable.

You will have to generate the `shareCredRequestToken` if you are working this application in your local machine.

1. Go to `https://verifier-token.vc-generator.com/` and log in with your verifier account
2. After logging in, select the `IDDocumentCredentialPersonV1` and click on `generate`
3. The 'Share Request Token' will be generated and you can copy and paste it into the `shareCredRequestToken` variable in this repository.

## How to run

1. Open terminal and navigate to the project folder
2. Run `npm install`
3. Run `cp .env.example .env`
4. Populate the credentials in `.env`
5. Run `npm start`

### Sequence

Run Issuer, Holder and Verifier in this sequence in your local machine.
